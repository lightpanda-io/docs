---
title: Your first test
description: Learn what is Lightpanda browser and run your first scrapping script.
---
import { Tabs } from 'nextra/components'
import { Callout } from 'nextra/components'

# 2. Your first test

Lightpanda is a headless browser built from scratch. Unlike Headless Chrome, it
has no UI or graphical rendering for humans, which allows it to start instantly
and execute pages up to 10x faster.

Unlike [curl](https://curl.se/), which only fetches raw HTML, Lightpanda can
execute JavaScript and run query selectors directly in the browser.

It's ideal for crawling, testing, and running AI agents that need to interact
with dynamic web pages, and it‚Äôs fully compatible with libraries like
[Puppeteer](https://pptr.dev/) and [Playwright](https://playwright.dev/).

In this example, you‚Äôll connect cd CDP client, [Puppeteer](https://pptr.dev/) or [Playwright](https://playwright.dev/) to Lightpanda
and extract all reference links from a [Wikipedia
page](https://www.wikipedia.org/).

## Connect CDP Client to Lightpanda

Install the [`puppeteer-core`](https://www.npmjs.com/package/puppeteer-core) *or* [`playwright-core`](https://www.npmjs.com/package/playwright-core) npm package.

<Callout type="info" emoji="">
  Unlike `puppeteer` and `playwright` npm packages,
  `puppeteer-core` and `playwright-core` don't download a Chromium browser.
</Callout>

<Tabs items={['puppeteer', 'playwright']} className="-mb-4">
  <Tabs.Tab id="puppeteer" className="m-0">
```sh copy
npm install -save puppeteer-core
```
  </Tabs.Tab>
  <Tabs.Tab id="playwright" className="m-0">
```sh copy
npm install -save playwright-core
```
  </Tabs.Tab>
</Tabs>

Edit your `index.js` to connect to Lightpanda:

<Tabs items={['puppeteer', 'playwright']} className="-mb-4">
  <Tabs.Tab id="puppeteer" className="m-0">
```javascript copy
'use strict'

const { lightpanda } = require('@lightpanda/browser');
const puppeteer = require('puppeteer-core');

const lpdopts = {
  host: '127.0.0.1',
  port: 9222,
};

const puppeteeropts = {
  browserWSEndpoint: 'ws://' + lpdopts.host + ':' + lpdopts.port,
};

(async () => {
  // Start Lightpanda browser in a separate process.
  const proc = await lightpanda.serve(lpdopts);

  // Connect Puppeteer to the browser.
  const browser = await puppeteer.connect(puppeteeropts);
  const context = await browser.createBrowserContext();
  const page = await context.newPage();

  // Do your magic ‚ú®
  console.log("CDP connection is working");

  // Disconnect Puppeteer.
  await page.close();
  await context.close();
  await browser.disconnect();

  // Stop Lightpanda browser process.
  proc.stdout.destroy();
  proc.stderr.destroy();
  proc.kill();
})();
```
  </Tabs.Tab>
  <Tabs.Tab id="playwright" className="m-0">
```javascript copy
'use strict'

const { lightpanda } = require('@lightpanda/browser');
const { chromium } = require('playwright-core');

const lpdopts = {
  host: '127.0.0.1',
  port: 9222,
};

const playwrightopts = {
  endpointURL: 'ws://' + lpdopts.host + ':' + lpdopts.port,
};

(async () => {
  // Start Lightpanda browser in a separate process.
  const proc = await lightpanda.serve(lpdopts);

  // Connect Playwright's chromium driver to the browser.
  const browser = await chromium.connectOverCDP(playwrightopts);
  const context = await browser.newContext({});
  const page = await context.newPage();

  // Do your magic ‚ú®
  console.log("CDP connection is working");

  // Disconnect Puppeteer.
  await page.close();
  await context.close();
  await browser.close();

  // Stop Lightpanda browser process.
  proc.stdout.destroy();
  proc.stderr.destroy();
  proc.kill();
})();
```
  </Tabs.Tab>
</Tabs>

Run the script to test the connection between Puppeteer or Playwright and Lightpanda:

```sh copy
node index.js
```
```sh
$ node index.js
üêº Running Lightpanda's CDP server... { pid: 31371 }
CDP connection is working
```

## Extract all reference links from Wikipedia

Update `index.js` using `page.goto` to navigate to a Wikipedia page and extract
all the reference links:

<Tabs items={['puppeteer', 'playwright']} className="-mb-4">
  <Tabs.Tab id="puppeteer" className="m-0">
```javascript copy
  // Go to Wikipedia page.
  await page.goto("https://en.wikipedia.org/wiki/Web_browser");
```
  </Tabs.Tab>
  <Tabs.Tab id="playwright" className="m-0">
```javascript copy
  // Go to Wikipedia page.
  await page.goto("https://en.wikipedia.org/wiki/Web_browser");
```
  </Tabs.Tab>
</Tabs>

Execute a query selector on the browser to extract the links:

<Tabs items={['puppeteer', 'playwright']} className="-mb-4">
  <Tabs.Tab id="puppeteer" className="m-0">
```javascript copy
  // Extract all links from the references list of the page.
  const reflist = await page.evaluate(() => {
    return Array.from(document.querySelectorAll('.references a.external')).map(row => {
      return row.getAttribute('href');
    });
  });
```
  </Tabs.Tab>
  <Tabs.Tab id="playwright" className="m-0">
```javascript copy
  // Extract all links from the references list of the page.
  const reflist = await page.locator('.references a.external').evaluateAll(links =>
    links.map(link => link.getAttribute('href'))
  );
```
  </Tabs.Tab>
</Tabs>

Here‚Äôs the full `index.js` file:

<Tabs items={['puppeteer', 'playwright']} className="-mb-4">
  <Tabs.Tab id="puppeteer" className="m-0">
```javascript copy
'use strict'

const { lightpanda } = require('@lightpanda/browser');
const puppeteer = require('puppeteer-core');

const lpdopts = {
  host: '127.0.0.1',
  port: 9222,
};

const puppeteeropts = {
  browserWSEndpoint: 'ws://' + lpdopts.host + ':' + lpdopts.port,
};

(async () => {
  // Start Lightpanda browser in a separate process.
  const proc = await lightpanda.serve(lpdopts);

  // Connect Puppeteer to the browser.
  const browser = await puppeteer.connect(puppeteeropts);
  const context = await browser.createBrowserContext();
  const page = await context.newPage();

  // Go to Wikipedia page.
  await page.goto("https://en.wikipedia.org/wiki/Web_browser");

  // Extract all links from the references list of the page.
  const reflist = await page.evaluate(() => {
    return Array.from(document.querySelectorAll('.references a.external')).map(row => {
      return row.getAttribute('href');
    });
  });

  // Display the result.
  console.log("all reference links", reflist);

  // Disconnect Puppeteer.
  await page.close();
  await context.close();
  await browser.disconnect();

  // Stop Lightpanda browser process.
  proc.stdout.destroy();
  proc.stderr.destroy();
  proc.kill();
})();
```
  </Tabs.Tab>
  <Tabs.Tab id="playwright" className="m-0">
```javascript copy
'use strict'

const { lightpanda } = require('@lightpanda/browser');
const { chromium } = require('playwright-core');

const lpdopts = {
  host: '127.0.0.1',
  port: 9222,
};

const playwrightopts = {
  endpointURL: 'ws://' + lpdopts.host + ':' + lpdopts.port,
};

(async () => {
  // Start Lightpanda browser in a separate process.
  const proc = await lightpanda.serve(lpdopts);

  // Connect using Playwright's chromium driver to the browser.
  const browser = await chromium.connectOverCDP(playwrightopts);
  const context = await browser.newContext({});
  const page = await context.newPage();

  // Go to Wikipedia page.
  await page.goto("https://en.wikipedia.org/wiki/Web_browser");

  // Extract all links from the references list of the page.
  const reflist = await page.locator('.references a.external').evaluateAll(links =>
    links.map(link => link.getAttribute('href'))
  );

  // Display the result.
  console.log("all reference links", reflist);

  // Disconnect Playwright.
  await page.close();
  await context.close();
  await browser.close();

  // Stop Lightpanda browser process.
  proc.stdout.destroy();
  proc.stderr.destroy();
  proc.kill();
})();
```
  </Tabs.Tab>
</Tabs>

## Execute the link extraction

Execute index.js to see the links directly in your console:
```sh copy
node index.js
```

```sh
$ node index.js
üêº Running Lightpanda's CDP server... { pid: 34389 }
all reference links [
  'https://gs.statcounter.com/browser-market-share',
  'https://radar.cloudflare.com/reports/browser-market-share-2024-q1',
  'https://web.archive.org/web/20240523140912/https://www.internetworldstats.com/stats.htm',
  'https://www.internetworldstats.com/stats.htm',
  'https://www.reference.com/humanities-culture/purpose-browser-e61874e41999ede',
```

### Step 3: [Extract data](/quickstart/build-your-first-extraction-script)
